// src/main/java/com/flow/coretime/mapper/UserMapper.java
package com.flow.coretime.mapper;

import com.flow.coretime.dto.User;
import org.apache.ibatis.annotations.Mapper;
import org.apache.ibatis.annotations.Param; // 여러 파라미터 전달 시 사용
import org.apache.ibatis.annotations.Select; // 간단한 쿼리는 어노테이션으로도 가능

import java.util.List;
import java.util.Optional;

@Mapper // 이 어노테이션을 반드시 붙여야 Spring이 매퍼로 인식합니다.
public interface UserMapper {

    // XML 매퍼 파일의 id="findById"와 매핑됩니다.
    Optional<User> findById(Long id);

    // XML 매퍼 파일의 id="findByUsername"과 매핑됩니다.
    Optional<User> findByUsername(String username);

    // XML 매퍼 파일의 id="insertUser"와 매핑됩니다.
    void insertUser(User user);

    // @Select 어노테이션을 사용하여 간단한 쿼리는 XML 없이도 정의할 수 있습니다.
    @Select("SELECT ID, USERNAME, PASSWORD, ROLES FROM USERS")
    List<User> findAllUsers();

    // 여러 파라미터를 넘길 때는 @Param 어노테이션을 사용하는 것이 좋습니다.
    @Select("SELECT ID, USERNAME, PASSWORD, ROLES FROM USERS WHERE USERNAME = #{username} AND ROLES = #{role}")
    List<User> findByUsernameAndRole(@Param("username") String username, @Param("role") String role);
}